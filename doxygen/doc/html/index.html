<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Out_Of_Core: Out Of Core Image Processing Liabary</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Out_Of_Core
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Image processing, support very large image</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>首页</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li><a href="examples.html"><span>示例</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>类</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>类型定义</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>友元</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>页</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Out Of Core Image Processing Liabary </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
介绍</h1>
<p>通常的图像处理是基于内存进行的，但在图像数据非常大导致无法将数据全部装入内存处理的时候，基于内存的处理方法就会失效。<br/>
 Out Of Core技术就是用来解决这个问题。当数据很大的时候，实际的数据存放在硬盘上，在需要获取或者处理数据的时候， 再动态的从磁盘中加载数据到内存进行处理。<br/>
</p>
<p>主要实现了下面几个类：</p>
<ul>
<li><a class="el" href="class_blockwise_image.html" title="Derived from GiantImageInterface, support the big image operation, and saves the whole image into dis...">BlockwiseImage</a> 可以容纳大型的数据数据储存，提供对图像处理的通用性接口，同时可以将图像数据写入到磁盘中以备后续处理。</li>
<li><a class="el" href="class_hierarchical_image.html" title="Derived from BlockwiseImage, support the big image operation, can save the image data in a hierarchic...">HierarchicalImage</a> 继承自BlockwiseImage，提供一致的图像处理接口，但在保存到磁盘时，将提取不同的层级的图像数据并写入磁盘，这样方便以后提取 不同分辨率下的图像数据。</li>
<li><a class="el" href="class_disk_big_image.html" title="Derived from DiskBigImageInterface, support for the reading and writing of the big image that was sav...">DiskBigImage</a> 用来对由BlockwiseImage和HierarchicalImage写入到磁盘中的图像数据进行动态的读写操作。</li>
</ul>
<p>几个工程文件说明：</p>
<ul>
<li>ReadingBigImage 图像浏览器的初步实现。</li>
<li>Test 对BlockwiseImage的图像处理接口和DiskBigImage的读写接口进行了测试，还有一部分是关于不同索引方法的测试。</li>
<li>WriteBlockWiseImage 使用BlockwiseImage写入图像数据</li>
<li>WriteHierarchicalImage 使用HierarchicalImage写入图像数据</li>
<li>TimeConsumeTest 对DiskBigImage类的get_pixels_by_level_fast和get_pixels_by_level速度上进行的测试。 <br/>
</li>
</ul>
<h1><a class="anchor" id="setup_sec"></a>
安装</h1>
<h2><a class="anchor" id="libary_sec"></a>
相关库</h2>
<pre>
 <b>1. boost</b>
 使用到了boost的下面相关子库：
 data_time iostreams filesystem system thread
 需要编译好上面的静态库</pre><pre> <b>2. stxxl</b>
 是一个提供了基于stl的容器接口，同时将容器数据存放在硬盘中的库。
 Website : <a href="http://stxxl.sourceforge.net/">http://stxxl.sourceforge.net/</a> 
 安装说明：
 （1）将/SharedLibrary/stxxl/include 设置为头文件包含的地址
 （2）将/SharedLibrary/stxxl/lib 设置为lib包含的地址 
 （3）在工程文件中设置下面的command line （前提配置好了boost, 在链接 stxxl的库的时候， 会自动去链接boost的相关库）</pre><pre> <b>Debug :</b>
 C/C++ &ndash; Command Line :
 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_SECURE_SCL=0 /Od /MDd /ZI -D_RTLDLL -DBOOST_LIB_DIAGNOSTIC -DSTXXL_BOOST_TIMESTAMP -DSTXXL_BOOST_CONFIG -DSTXXL_BOOST_FILESYSTEM -DSTXXL_BOOST_THREADS -DSTXXL_BOOST_RANDOM /EHsc /EHs /wd4820 /wd4217 /wd4668 /wd4619 /wd4625 /wd4626 /wd4355 /wd4996 -D_SCL_SECURE_NO_DEPRECATE /F 16777216 /nologo /DSTXXL_LIBNAME="stxxl_debug"</pre><pre> Linker &ndash; Command Line :
 /STACK:16777216 /NOLOGO /DEBUG</pre><pre> <b>Release :</b>
 C/C++ &ndash; Command Line :
 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_SECURE_SCL=0 /O2 /Ob2 /MD /DNDEBUG -D_RTLDLL -DBOOST_LIB_DIAGNOSTIC -DSTXXL_BOOST_TIMESTAMP -DSTXXL_BOOST_CONFIG -DSTXXL_BOOST_FILESYSTEM -DSTXXL_BOOST_THREADS -DSTXXL_BOOST_RANDOM /EHsc /EHs /wd4820 /wd4217 /wd4668 /wd4619 /wd4625 /wd4626 /wd4355 /wd4996 -D_SCL_SECURE_NO_DEPRECATE /F 16777216 /nologo /DSTXXL_LIBNAME="stxxl_release"</pre><pre> Linker &ndash; Command Line :
 /STACK:16777216 /NOLOGO /OPT:REF</pre><pre> （4）stxxl的配置文件，在代码运行的目录下面新建文件config.stxxl
 For example : #config.stxxl
 disk=c:,70000,wincall     
 disk=d:,70000,wincall
 disk=e:,70000,wincall
 #表示在在c，d，e中分别建立70000M大小的文件stxxl用来保存数据用。
 #对于Out_Of_Core模块而言，大小取决于图像的数据大小，比如一个102400*102400的图像而言，
 如果图像是RGB个格式，那么总大小为30G的图像。由于使用了zorder进行存储，存在数据冗余。
 使用zorder作为索引格式的话，最多是为原来大小的4倍，一般为2倍左右，所以分配60G到120G比较合适。</pre><pre> <b>3. OpenCV</b>
 如果定义了宏 SAVE_MINI_IMAGE
 在将图像写入到磁盘中的时候，同时也会产生一张由用户指定分辨率大小的jpg格式图像文件，该文件是图像的缩略图用来方便得到显示效果
 将使用到了OpenCV的下面模块
 core highgui imgproc
 </pre> <dl class="section note"><dt>注解</dt><dd>默认是没有定义SAVE_MINI_IMAGE <br/>
</dd></dl>
<h1><a class="anchor" id="src_sec"></a>
Out Of Core模块代码</h1>
<p>所有代码都是模板类或者是放在.h文件中的inline函数，直接include到代码中编译即可。<br/>
 代码放在了/Platform/OutOfCore/include/ 文件夹下 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
