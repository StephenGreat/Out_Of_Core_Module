\section{Hierarchical\-Image$<$ T, memory\-\_\-usage $>$ 模板类 参考}
\label{class_hierarchical_image}\index{Hierarchical\-Image$<$ T, memory\-\_\-usage $>$@{Hierarchical\-Image$<$ T, memory\-\_\-usage $>$}}


Derived from \doxyref{Blockwise\-Image}{p.}{class_blockwise_image}, support the big image operation, can save the image data in a hierarchical way.  




{\ttfamily \#include $<$Hierarchical\-Image.\-h$>$}



类 Hierarchical\-Image$<$ T, memory\-\_\-usage $>$ 继承关系图\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=206pt]{class_hierarchical_image__inherit__graph}
\end{center}
\end{figure}


Hierarchical\-Image$<$ T, memory\-\_\-usage $>$ 的协作图\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_hierarchical_image__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
{\bf Hierarchical\-Image} (size\-\_\-t rows, size\-\_\-t cols, size\-\_\-t mini\-\_\-rows, size\-\_\-t mini\-\_\-cols, boost\-::shared\-\_\-ptr$<$ {\bf Index\-Method\-Interface} $>$ method=boost\-::shared\-\_\-ptr$<$ {\bf Index\-Method\-Interface} $>$())
\item 
virtual bool {\bf write\-\_\-image} (const char $\ast$file\-\_\-name)
\item 
virtual bool {\bfseries write\-\_\-image} (const std\-::string \&file\-\_\-name)\label{class_hierarchical_image_a983ac78f154c2459eae807a740c5a4f2}

\item 
virtual bool {\bf save\-\_\-mini\-\_\-image} (const char $\ast$file\-\_\-name)
\begin{DoxyCompactList}\small\item\em save the mini size image as a jpg file for observation \end{DoxyCompactList}\item 
void {\bf set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number} (size\-\_\-t number)
\begin{DoxyCompactList}\small\item\em set the number for writing image files concurrently \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
void {\bf set\-\_\-image\-\_\-data\-\_\-path} (const char $\ast$file\-\_\-name)
\begin{DoxyCompactList}\small\item\em set the image data path from the big image file name. \end{DoxyCompactList}\item 
bool {\bf write\-\_\-image\-\_\-head\-\_\-file} (const char $\ast$file\-\_\-name)\label{class_hierarchical_image_a4b34e191a90baabf547bc899a2822b0d}

\begin{DoxyCompactList}\small\item\em write the image head file \end{DoxyCompactList}\item 
bool {\bf write\-\_\-image\-\_\-inner\-\_\-loop} (size\-\_\-t start\-\_\-level, size\-\_\-t merge\-\_\-number, const boost\-::filesystem3\-::path \&data\-\_\-path, const int64 \&file\-\_\-number)\label{class_hierarchical_image_a2c2c982991f2f28cbf54f15266f507e5}

\begin{DoxyCompactList}\small\item\em write the start\-\_\-level image data in the write image inner loop \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
size\-\_\-t {\bf concurrent\-\_\-number}
\item 
std\-::string {\bf img\-\_\-data\-\_\-path}
\item 
{\bf Size} {\bf img\-\_\-current\-\_\-level\-\_\-size}
\end{DoxyCompactItemize}
\subsection*{相关函数}
(请注意\-: 这些不是成员函数.) \begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\boost\-::shared\-\_\-ptr\\*
$<$ {\bf Giant\-Image\-Interface}$<$ T $>$ $>$ {\bf get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage} (unsigned memory\-\_\-usage, size\-\_\-t rows, size\-\_\-t cols, size\-\_\-t mini\-\_\-rows, size\-\_\-t mini\-\_\-cols, boost\-::shared\-\_\-ptr$<$ {\bf Index\-Method\-Interface} $>$ method=boost\-::shared\-\_\-ptr$<$ {\bf Index\-Method\-Interface} $>$())
\begin{DoxyCompactList}\small\item\em return the hierarchical image by memroy\-\_\-usage, maximum support 4\-G \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{额外继承的成员函数}


\subsection{详细描述}
\subsubsection*{template$<$typename T, size\-\_\-t memory\-\_\-usage = 64$>$class Hierarchical\-Image$<$ T, memory\-\_\-usage $>$}

Derived from \doxyref{Blockwise\-Image}{p.}{class_blockwise_image}, support the big image operation, can save the image data in a hierarchical way. 

\doxyref{Hierarchical\-Image}{p.}{class_hierarchical_image} can support very big image processing and storing, different with the \doxyref{Blockwise\-Image}{p.}{class_blockwise_image}, \doxyref{Hierarchical\-Image}{p.}{class_hierarchical_image} can write the image into different levels, but the \doxyref{Blockwise\-Image}{p.}{class_blockwise_image} can only save the full size of the image.


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & The type of the image cell \\
\hline
{\em memory\-\_\-usage} & The memory usage used as a I/\-O cache in the main memory, and it must be bigger than 8 (in the unit of M). By default, memory\-\_\-usage is set to 64\-M \\
\hline
\end{DoxyTemplParams}
\begin{Desc}
\item[示例\-: ]\par
{\bf Write\-Hierarchical\-Image.\-cpp}.\end{Desc}


在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.



\subsection{构造及析构函数说明}
\index{Hierarchical\-Image@{Hierarchical\-Image}!Hierarchical\-Image@{Hierarchical\-Image}}
\index{Hierarchical\-Image@{Hierarchical\-Image}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{Hierarchical\-Image}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T , size\-\_\-t memory\-\_\-usage$>$ {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::{\bf Hierarchical\-Image} (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{rows, }
\item[{size\-\_\-t}]{cols, }
\item[{size\-\_\-t}]{mini\-\_\-rows, }
\item[{size\-\_\-t}]{mini\-\_\-cols, }
\item[{boost\-::shared\-\_\-ptr$<$ {\bf Index\-Method\-Interface} $>$}]{method = {\ttfamily boost\-:\-:shared\-\_\-ptr$<${\bf Index\-Method\-Interface}$>$()}}
\end{DoxyParamCaption}
)}\label{class_hierarchical_image_a10037544868f5d2efc66993f8ddc23b0}

\begin{DoxyParams}{参数}
{\em rows} & the image total rows \\
\hline
{\em cols} & the image total cols \\
\hline
{\em mini\-\_\-rows} & the minimum size image rows \\
\hline
{\em mini\-\_\-cols} & the minimum size image cols \\
\hline
{\em method} & \-: the index method shared\-\_\-ptr object(default is zorder index method) \\
\hline
\end{DoxyParams}


在文件 {\bf Hierarchical\-Image.\-hpp} 第  行定义.



函数调用图\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{class_hierarchical_image_a10037544868f5d2efc66993f8ddc23b0_cgraph}
\end{center}
\end{figure}




\subsection{成员函数说明}
\index{Hierarchical\-Image@{Hierarchical\-Image}!save\-\_\-mini\-\_\-image@{save\-\_\-mini\-\_\-image}}
\index{save\-\_\-mini\-\_\-image@{save\-\_\-mini\-\_\-image}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{save\-\_\-mini\-\_\-image}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T , size\-\_\-t memory\-\_\-usage$>$ bool {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::save\-\_\-mini\-\_\-image (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\-\_\-name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{class_hierarchical_image_ad4c49535e55585ed7726856d8c65ef6e}


save the mini size image as a jpg file for observation 


\begin{DoxyParams}{参数}
{\em file\-\_\-name} & the bigimage file name ($\ast$.bigimage) \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{注解}
if not defined the S\-A\-V\-E\-\_\-\-M\-I\-N\-I\-\_\-\-I\-M\-A\-G\-E macro, this function will do nothing 
\end{DoxyNote}


重载 {\bf Blockwise\-Image$<$ T, memory\-\_\-usage $>$} \doxyref{}{p.}{class_blockwise_image_a47ca8a383348f9cc527365977e9d721b} .



在文件 {\bf Hierarchical\-Image.\-hpp} 第  行定义.

\index{Hierarchical\-Image@{Hierarchical\-Image}!set\-\_\-image\-\_\-data\-\_\-path@{set\-\_\-image\-\_\-data\-\_\-path}}
\index{set\-\_\-image\-\_\-data\-\_\-path@{set\-\_\-image\-\_\-data\-\_\-path}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{set\-\_\-image\-\_\-data\-\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T , size\-\_\-t memory\-\_\-usage$>$ void {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::set\-\_\-image\-\_\-data\-\_\-path (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\-\_\-name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}\label{class_hierarchical_image_ae827b72365d1e8b65af0bf5c10a197d0}


set the image data path from the big image file name. 

For example \-: the file\-\_\-name is /a/x.bigimage then the data\-\_\-path is /a/x/ 

在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.

\index{Hierarchical\-Image@{Hierarchical\-Image}!set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number@{set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number}}
\index{set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number@{set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T , size\-\_\-t memory\-\_\-usage$>$ void {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::set\-\_\-mutliply\-\_\-ways\-\_\-writing\-\_\-number (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{number}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{class_hierarchical_image_a2f5b6691db32f8af8fff11a4982e88b9}


set the number for writing image files concurrently 

If the image has n levels(thus max level is n-\/1), then when write the image data in a hierarchical way into disk the maximum concurrent number is n. 

在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.



这是这个函数的调用关系图\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=348pt]{class_hierarchical_image_a2f5b6691db32f8af8fff11a4982e88b9_icgraph}
\end{center}
\end{figure}


\index{Hierarchical\-Image@{Hierarchical\-Image}!write\-\_\-image@{write\-\_\-image}}
\index{write\-\_\-image@{write\-\_\-image}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{write\-\_\-image}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T , size\-\_\-t memory\-\_\-usage$>$ bool {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::write\-\_\-image (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{file\-\_\-name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{class_hierarchical_image_a6ade13ae295516b5a899498c6800451d}
\begin{DoxyNote}{注解}
file\-\_\-name must has the extension \char`\"{}.\-bigimage\char`\"{} 
\end{DoxyNote}


重载 {\bf Blockwise\-Image$<$ T, memory\-\_\-usage $>$} \doxyref{}{p.}{class_blockwise_image_a64f3e966d516c8b039bd9f4c8685055c} .



在文件 {\bf Hierarchical\-Image.\-hpp} 第  行定义.



\subsection{友元及相关函数文档}
\index{Hierarchical\-Image@{Hierarchical\-Image}!get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage@{get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage}}
\index{get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage@{get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ boost\-::shared\-\_\-ptr$<$ {\bf Giant\-Image\-Interface}$<$ T $>$ $>$ get\-\_\-hierarchical\-\_\-image\-\_\-by\-\_\-meomory\-\_\-usage (
\begin{DoxyParamCaption}
\item[{unsigned}]{memory\-\_\-usage, }
\item[{size\-\_\-t}]{rows, }
\item[{size\-\_\-t}]{cols, }
\item[{size\-\_\-t}]{mini\-\_\-rows, }
\item[{size\-\_\-t}]{mini\-\_\-cols, }
\item[{boost\-::shared\-\_\-ptr$<$ {\bf Index\-Method\-Interface} $>$}]{method = {\ttfamily boost\-:\-:shared\-\_\-ptr$<${\bf Index\-Method\-Interface}$>$()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [related]}}\label{class_hierarchical_image_a743b80da5ae98d79af3fd143a3a7fb18}


return the hierarchical image by memroy\-\_\-usage, maximum support 4\-G 


\begin{DoxyParams}{参数}
{\em memory\-\_\-usage} & the memory usage of the main memory \\
\hline
{\em method} & the index method shared\-\_\-ptr object \\
\hline
{\em rows} & the image total rows \\
\hline
{\em cols} & the image total cols \\
\hline
{\em mini\-\_\-rows} & the minimum size image rows \\
\hline
{\em mini\-\_\-cols} & the minimum size image cols \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
the shared\-\_\-ptr of the \doxyref{Giant\-Image\-Interface}{p.}{class_giant_image_interface} object which indeed is a \doxyref{Hierarchical\-Image}{p.}{class_hierarchical_image} object 
\end{DoxyReturn}


在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.



\subsection{类成员变量说明}
\index{Hierarchical\-Image@{Hierarchical\-Image}!concurrent\-\_\-number@{concurrent\-\_\-number}}
\index{concurrent\-\_\-number@{concurrent\-\_\-number}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{concurrent\-\_\-number}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T, size\-\_\-t memory\-\_\-usage = 64$>$ size\-\_\-t {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::concurrent\-\_\-number\hspace{0.3cm}{\ttfamily [protected]}}\label{class_hierarchical_image_a83791665a03876e2e0927035edb35823}
the number for writing image data files in concurrently 

在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.

\index{Hierarchical\-Image@{Hierarchical\-Image}!img\-\_\-current\-\_\-level\-\_\-size@{img\-\_\-current\-\_\-level\-\_\-size}}
\index{img\-\_\-current\-\_\-level\-\_\-size@{img\-\_\-current\-\_\-level\-\_\-size}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{img\-\_\-current\-\_\-level\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T, size\-\_\-t memory\-\_\-usage = 64$>$ {\bf Size} {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::img\-\_\-current\-\_\-level\-\_\-size\hspace{0.3cm}{\ttfamily [protected]}}\label{class_hierarchical_image_a9a595586f85d45a1964600eb7ec4559f}
the image current level 

在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.

\index{Hierarchical\-Image@{Hierarchical\-Image}!img\-\_\-data\-\_\-path@{img\-\_\-data\-\_\-path}}
\index{img\-\_\-data\-\_\-path@{img\-\_\-data\-\_\-path}!HierarchicalImage@{Hierarchical\-Image}}
\subsubsection[{img\-\_\-data\-\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T, size\-\_\-t memory\-\_\-usage = 64$>$ std\-::string {\bf Hierarchical\-Image}$<$ T, memory\-\_\-usage $>$\-::img\-\_\-data\-\_\-path\hspace{0.3cm}{\ttfamily [protected]}}\label{class_hierarchical_image_a79a42b409bae6f95caeddfe9bd20d3bf}
the data of the image file data 

在文件 {\bf Hierarchical\-Image.\-h} 第  行定义.



该类的文档由以下文件生成\-:\begin{DoxyCompactItemize}
\item 
D\-:/\-Out\-\_\-\-Of\-\_\-\-Core\-\_\-\-Git/src/Hierarchical\-Image.\-h\item 
D\-:/\-Out\-\_\-\-Of\-\_\-\-Core\-\_\-\-Git/src/Hierarchical\-Image.\-hpp\end{DoxyCompactItemize}
